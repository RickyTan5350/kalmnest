Example model
```

<?php

namespace App\Models;

use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;

class User extends Authenticatable
{
    use Notifiable;

    protected $fillable = [
        'name',
        'email',
        'password',
    ];

    protected $hidden = [
        'password',
        'remember_token',
    ];

    // ... more code
}
```

---
# Traits
- `use Notifiable`
- Interacts with model as a whole
- Allows for code reuse across multiple, unrelated Eloquent models
- Reduces duplication
- Promote consistency
# $fillable
- Array to show Laravel that people can enter `name`, `email`, and `password` into tables in database
# $hidden
- Specifies attributes to be excluded when model is 
	- converted to array or JSON
- Prevents sensitive information from being exposed in API responses or other data outputs
# $casts
- Automatically converts attribute data types when retrieving from database
- e.g.
	- automatic convert JSON string to PHP array
	- database date to PHP `DateTime` Object
```
protected $casts = [
	'somedata' => 'boolean'
];
```
- Convert `somedata` in database, output in Boolean
---
# Create Models
```
php artisan make:model Chirp
```

## Dash Parameter `-mrc`
- `m` creates migration
- `rc` creates resource controller
- ==tldr: create model, migration file and controller together==
---
# Relationships
- Given relation: a user posts one to many chirps

`Chirp.php`
```
public function user(): BelongsTo{
	return $this->belongsTo(User::class);
}
```
`User.php`
```
public function chirps(): HasMany{
    return $this->hasMany(Chirp::class);
}
```
- This relation tells Laravel that:
	- When calling user on chirps
	- Allow to grab user information associated to single instance of a chirp or multiple chirp
- Allows `$user->chirps` to get all chirps of a user, or
	- `$chirp->user` to get chirp author
---
# Using Tinker to View Model
```

// Create a new user
$user = \App\Models\User::create([
    'name' => 'Eloquent Expert',
    'email' => 'eloquent@expert.com',
    'password' => bcrypt('password')
]);

// Create a chirp for this user
$chirp = $user->chirps()->create([
    'message' => 'Eloquent makes database work a breeze!'
]);

// Access the relationship
echo $chirp->user->name; // "Eloquent Expert"

// Get all chirps
\App\Models\Chirp::all();

// Get recent chirps
\App\Models\Chirp::latest()->get();
```

---
# Updating Controller
- To access real data from model

`ChirpController.php`
```
public function index()
    {
        $chirps = Chirp::with('user')
            ->latest()
            ->take(50)  // Limit to 50 most recent chirps
            ->get();
 
        return view('home', ['chirps' => $chirps]);
    }
```
- Breakdown
	- `Chirp::with('user')` - This is so that we can eager load that user relationship and it prevents N+1 queries—in that case, having to query the database multiple times for things that we already have
    - `latest()` - take latest chirps, ordering by created_at
    - `take(50)` - to only take 50 chirps
    - `get()` - to get chirps
